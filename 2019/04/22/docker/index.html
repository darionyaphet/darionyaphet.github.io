<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="science &amp; art"><title>docker | Hexo</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-time">2019-04-22</div></div></div><div class="container post-header"><h1>docker</h1></div><div class="container post-content"><h2 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started"></a>Get Started</h2><hr>
<p>This tutorial provides a quick introduction to using <code>Nebula Graph</code>.</p>
<h3 id="Step-1-Install-Nebula-Graph"><a href="#Step-1-Install-Nebula-Graph" class="headerlink" title="Step 1 Install Nebula Graph"></a>Step 1 Install Nebula Graph</h3><p><code>Docker</code> is a tool that can package an application and its dependencies in a container that can running on anywhere. The easiest way to startup <code>nebula</code> is using <code>docker</code>. </p>
<p>First of all, you should make sure <code>docker</code> have installed on your machine. Open a terminal and running the following command :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure>
<p>If <code>docker</code> is not found, please see <a href="https://docs.docker.com/install/" target="_blank" rel="noopener">here</a> for more information to install docker.</p>
<p>After that, using <code>docker pull vesoft/nebula-graph</code> to get <code>nebula</code> image and <code>docker images</code> could display images status.</p>
<h3 id="Step-2-Startup-Nebula-Graph"><a href="#Step-2-Startup-Nebula-Graph" class="headerlink" title="Step 2 Startup Nebula Graph"></a>Step 2 Startup Nebula Graph</h3><p>When <code>nebula</code> image is ready, run <code>docker run -it vesoft/nebula-graph /bin/bash</code> to start and login the docker container.<br>After login in the container, it’s the <code>root</code> directory and you should using <code>cd ~/nebula-graph/</code> switch to the nebula home directory.</p>
<p>Run <code>./start-all.sh</code> to start meta service, storage service and graph service.</p>
<p><code>ps -ef | grep nebula</code> would display the servie’s running status. Please make sure the services is working.</p>
<p><code>bin/nebula</code> is a <code>console</code> which is use to insert and query data.</p>
<p><code>--port</code> is used for specify the graph server port and default value is <code>3699</code>.</p>
<p><code>--u</code> and <code>--p</code> use to specify the user name and password, <code>user</code> and <code>password</code> are default authority. </p>
<p>Run <code>bin/nebula --port=3699 --u=user --p=password</code> connect to the graph server.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Nebula Graph (Version 0.1)</span><br><span class="line"></span><br><span class="line">nebula&gt;</span><br></pre></td></tr></table></figure>
<p>Before query the dataset, you should switch to a existed graph space.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nebula&gt; use space nba</span><br><span class="line">Execution succeeded (Time spent: 154/793 us)</span><br></pre></td></tr></table></figure>
<p>also you can create you own graph space, such as :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Create space mySpace(partition_num=1, replica_factor=1)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Step-3-Data-Schema"><a href="#Step-3-Data-Schema" class="headerlink" title="Step 3 Data Schema"></a>Step 3 Data Schema</h3><p>When you start <code>Nebula Graph</code>, a set of vertex and edge have already exists.<br>Currently the default schema is <code>nba</code>. </p>
<p>The graph space describes the relationship between players and teams. In the graph space, there are two tags (player and team) and two edges (serve and like) which is composed of <code>string</code> and <code>integer</code>. </p>
<p>The Schema looks like :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;nba&quot;: &#123;</span><br><span class="line">		&quot;tags&quot;: &#123;</span><br><span class="line">			&quot;player&quot;: [[&quot;name: string&quot;,&quot;age: integer&quot;]],</span><br><span class="line">			&quot;team&quot;: [[&quot;name: string&quot;]]</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;edges&quot;: &#123;</span><br><span class="line">			&quot;serve&quot;: [[&quot;start_year: integer&quot;,&quot;end_year: integer&quot;]],</span><br><span class="line">			&quot;like&quot;: [[&quot;likeness: integer&quot;]]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The insert sentences are look like the following commands.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSERT VERTEX player(name, age) VALUES(-8379929135833483044: &quot;Amar&apos;e Stoudemire&quot;,36)</span><br><span class="line"></span><br><span class="line">INSERT VERTEX team(name) VALUES(-9110170398241263635: &quot;Magic&quot;)</span><br><span class="line"></span><br><span class="line">INSERT EDGE like(likeness) VALUES(-8379929135833483044 -&gt; 6663720087669302163: 90)</span><br><span class="line"></span><br><span class="line">INSERT EDGE serve(start_year, end_year) VALUES(-8379929135833483044 -&gt; 868103967282670864: 2002, 2010)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Step-4-Simple-Query"><a href="#Step-4-Simple-Query" class="headerlink" title="Step 4 Simple Query"></a>Step 4 Simple Query</h3><p>This query from a vertex walk up a edge.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nebula&gt; go from 5209979940224249985 over like</span><br><span class="line">========================</span><br><span class="line">|                   id |</span><br><span class="line">========================</span><br><span class="line">| -7187791973189815797 |</span><br><span class="line">------------------------</span><br><span class="line">|  3778194419743477824 |</span><br><span class="line">------------------------</span><br><span class="line">| -6952676908621237908 |</span><br><span class="line">------------------------</span><br><span class="line">........................</span><br></pre></td></tr></table></figure>
<p>This query from a vertex walk up a edge and the target’s age should greater than or equal to 30, also rename the columns as <code>Player</code>, <code>Friend</code> and <code>Age</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nebula&gt; go from 5209979940224249985 over like where $$[player].age &gt;= 30 YIELD $^[player].name as Player, $$[player].name as Friend, $$[player].age As Age</span><br><span class="line">=============================================</span><br><span class="line">|          Player |            Friend | Age |</span><br><span class="line">=============================================</span><br><span class="line">| Dejounte Murray |      Kevin Durant |  30 |</span><br><span class="line">---------------------------------------------</span><br><span class="line">| Dejounte Murray |        Chris Paul |  33 |</span><br><span class="line">---------------------------------------------</span><br><span class="line">| Dejounte Murray |      LeBron James |  34 |</span><br><span class="line">---------------------------------------------</span><br><span class="line">.............................................</span><br></pre></td></tr></table></figure>
<p>This query from a vertex walk up a edge and the target’s age should greater than or equal to 30.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nebula&gt; go from 5209979940224249985 over like where $$[player].age &gt;= 30 | go from $-.id over serve yield $^[player].name As Player, serve.start_year as FromYear, serve.end_year as ToYear, $$[team].name as Team</span><br><span class="line">=====================================================</span><br><span class="line">|            Player | FromYear | ToYear |      Team |</span><br><span class="line">=====================================================</span><br><span class="line">|      Kevin Durant |     2016 |   2019 |  Warriors |</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">|      Kevin Durant |     2007 |   2016 |  Thunders |</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">|        Chris Paul |     2017 |   2021 |   Rockets |</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">.....................................................</span><br></pre></td></tr></table></figure>
<p>For more detail about Query Language, please see <a href="../docs/nGQL.md#traverse-the-graph">Traverse The Graph</a>.</p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>